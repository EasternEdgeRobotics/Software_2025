// cli.cpp
#include <iostream>
#include <string>
#include <thread>
#include <atomic>
#include <opencv2/opencv.hpp>
#include <mutex>

//forward declarations

void launchGUI();
void launchController();

// Function to print colored ASCII image
void printColoredAsciiImage() {
    
    std::string art = R"([49m                                                  [48;5;0m                              [49m                                                  [m
[49m                                        [48;5;0m            [48;5;11m                          [48;5;0m            [49m                                        [m
[49m                                [48;5;0m        [48;5;220m  [48;5;11m                                              [48;5;220m  [48;5;0m        [49m                                [m
[49m                            [48;5;0m      [48;5;11m                                                              [48;5;0m      [49m                            [m
[49m                        [48;5;0m    [48;5;11m                                                                          [48;5;0m    [49m                        [m
[49m                    [48;5;0m    [48;5;11m                                                                                  [48;5;0m    [49m                    [m
[49m                [48;5;0m    [48;5;11m                                                                                          [48;5;0m    [49m                [m
[49m              [48;5;0m    [48;5;11m                                              [48;5;236m  [48;5;103m    [48;5;236m  [48;5;11m                                        [48;5;0m    [49m              [m
[49m            [48;5;0m  [48;5;11m                                                  [48;5;236m  [48;5;15m    [48;5;236m  [48;5;11m                                            [48;5;0m  [49m            [m
[49m          [48;5;0m  [48;5;11m      [48;5;236m            [48;5;60m  [48;5;11m    [48;5;236m        [48;5;220m  [48;5;236m                  [48;5;15m      [48;5;236m                                            [48;5;11m    [48;5;0m  [49m          [m
[49m        [48;5;0m  [48;5;11m        [48;5;236m  [48;5;15m            [48;5;11m  [48;5;60m  [48;5;15m          [48;5;220m  [48;5;15m            [48;5;236m  [48;5;15m          [48;5;236m  [48;5;15m            [48;5;236m  [48;5;15m            [48;5;236m  [48;5;15m            [48;5;236m  [48;5;11m    [48;5;0m  [49m        [m
[49m      [48;5;0m  [48;5;11m          [48;5;236m  [48;5;15m    [48;5;236m  [48;5;15m      [48;5;236m  [48;5;15m            [48;5;184m  [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m    [48;5;15m      [48;5;236m    [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m  [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m  [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m  [48;5;11m      [48;5;0m  [49m      [m
[49m    [48;5;0m  [48;5;11m            [48;5;236m  [48;5;15m          [48;5;61m  [48;5;60m  [48;5;15m            [48;5;236m  [48;5;15m            [48;5;236m    [48;5;15m    [48;5;236m  [48;5;11m  [48;5;137m  [48;5;15m            [48;5;236m  [48;5;15m      [48;5;11m      [48;5;184m  [48;5;15m            [48;5;236m  [48;5;11m        [48;5;0m  [49m    [m
[49m    [48;5;0m  [48;5;11m            [48;5;15m          [48;5;236m  [48;5;11m  [48;5;146m  [48;5;15m          [48;5;236m    [48;5;15m            [48;5;11m  [48;5;15m      [48;5;236m  [48;5;11m  [48;5;236m  [48;5;15m          [48;5;236m    [48;5;15m      [48;5;11m      [48;5;236m  [48;5;15m    [48;5;146m  [48;5;15m      [48;5;11m          [48;5;0m  [49m    [m
[49m  [48;5;0m  [48;5;11m            [48;5;236m  [48;5;15m            [48;5;236m  [48;5;15m            [48;5;236m  [48;5;15m      [48;5;236m  [48;5;15m    [48;5;146m  [48;5;137m  [48;5;15m      [48;5;11m    [48;5;252m  [48;5;15m    [48;5;236m  [48;5;15m    [48;5;252m  [48;5;236m  [48;5;15m    [48;5;236m  [48;5;11m      [48;5;236m  [48;5;15m    [48;5;236m  [48;5;15m      [48;5;11m            [48;5;0m  [49m  [m
[49m  [48;5;0m  [48;5;11m            [48;5;236m  [48;5;15m          [48;5;236m  [48;5;101m  [48;5;15m            [48;5;236m  [48;5;104m  [48;5;15m          [48;5;236m  [48;5;11m  [48;5;15m      [48;5;11m    [48;5;146m  [48;5;15m  [48;5;0m    [48;5;102m  [48;5;15m  [48;5;236m  [48;5;15m      [48;5;60m  [48;5;11m      [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m  [48;5;11m            [48;5;0m  [49m  [m
[48;5;0m  [48;5;58m  [48;5;11m              [48;5;236m          [48;5;11m    [48;5;236m                        [48;5;11m    [48;5;233m  [48;5;0m                [48;5;236m    [48;5;11m  [48;5;236m        [48;5;11m      [48;5;236m                [48;5;11m            [48;5;3m  [48;5;0m  [m
[48;5;0m  [48;5;11m                                                      [48;5;0m    [48;5;15m  [48;5;11m                                                                  [48;5;0m  [m
[48;5;0m  [48;5;11m                                                    [48;5;0m    [48;5;11m                                                                      [48;5;0m  [m
[48;5;0m  [48;5;11m                                                  [48;5;0m    [48;5;11m            [48;5;236m  [48;5;15m    [48;5;236m  [48;5;11m                                                    [48;5;0m  [m
[48;5;0m  [48;5;11m                              [48;5;15m  [48;5;11m                  [48;5;0m  [48;5;15m  [48;5;11m            [48;5;15m      [48;5;236m  [48;5;11m                                                    [48;5;0m  [m
[48;5;0m  [48;5;11m                    [48;5;15m  [48;5;11m      [48;5;227m  [48;5;9m  [48;5;11m                [48;5;15m  [48;5;0m  [48;5;15m  [48;5;11m        [48;5;101m    [48;5;15m      [48;5;143m  [48;5;11m  [48;5;143m            [48;5;179m            [48;5;11m                          [48;5;0m  [m
[48;5;0m  [48;5;58m  [48;5;11m                    [48;5;9m  [48;5;227m  [48;5;11m  [48;5;9m    [48;5;11m                [48;5;0m      [48;5;11m    [48;5;236m  [48;5;15m            [48;5;11m  [48;5;236m  [48;5;15m          [48;5;236m    [48;5;15m            [48;5;11m                      [48;5;3m  [48;5;0m  [m
[49m  [48;5;0m  [48;5;11m                    [48;5;9m    [48;5;15m  [48;5;9m    [48;5;11m      [48;5;15m  [48;5;11m        [48;5;0m      [48;5;230m  [48;5;143m  [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m    [48;5;15m            [48;5;236m    [48;5;15m    [48;5;236m  [48;5;15m      [48;5;11m                      [48;5;0m  [49m  [m
[49m  [48;5;0m  [48;5;11m          [48;5;15m  [48;5;0m      [48;5;15m  [48;5;9m          [48;5;255m  [48;5;9m    [48;5;0m                  [48;5;236m  [48;5;15m      [48;5;0m          [48;5;15m    [48;5;236m  [48;5;15m      [48;5;11m  [48;5;7m  [48;5;15m    [48;5;251m  [48;5;15m    [48;5;60m  [48;5;11m                      [48;5;0m  [49m  [m
[49m    [48;5;0m  [48;5;11m        [48;5;0m          [48;5;15m  [48;5;9m            [48;5;0m        [48;5;251m  [48;5;15m  [48;5;0m        [48;5;236m  [48;5;15m    [48;5;236m  [48;5;0m          [48;5;15m    [48;5;236m  [48;5;15m      [48;5;11m  [48;5;15m          [48;5;60m  [48;5;11m                      [48;5;0m  [49m    [m
[49m    [48;5;0m  [48;5;11m                    [48;5;9m            [48;5;11m          [48;5;0m        [48;5;11m  [48;5;15m      [48;5;236m  [48;5;15m      [48;5;143m  [48;5;15m      [48;5;236m  [48;5;15m    [48;5;236m    [48;5;15m            [48;5;60m  [48;5;11m                    [48;5;0m  [49m    [m
[49m      [48;5;0m  [48;5;11m                [48;5;15m      [48;5;9m    [48;5;11m              [48;5;0m    [48;5;15m  [48;5;11m    [48;5;15m              [48;5;101m  [48;5;15m            [48;5;236m    [48;5;15m          [48;5;236m  [48;5;11m                    [48;5;0m  [49m      [m
[49m        [48;5;0m  [48;5;11m                        [48;5;15m  [48;5;11m            [48;5;0m  [48;5;15m  [48;5;11m      [48;5;236m                      [48;5;15m      [48;5;236m  [48;5;184m  [48;5;236m          [48;5;11m                    [48;5;0m  [49m        [m
[49m          [48;5;0m  [48;5;11m                                  [48;5;248m  [48;5;0m  [48;5;11m                      [48;5;61m        [48;5;15m      [48;5;11m                                [48;5;0m  [49m          [m
[49m            [48;5;0m  [48;5;11m                                [48;5;0m    [48;5;11m                    [48;5;236m  [48;5;15m            [48;5;236m  [48;5;11m                              [48;5;0m  [49m            [m
[49m              [48;5;0m    [48;5;11m                            [48;5;15m  [48;5;0m  [48;5;11m                                                              [48;5;0m    [49m              [m
[49m                [48;5;0m    [48;5;11m                            [48;5;0m    [48;5;11m                                                          [48;5;0m    [49m                [m
[49m                    [48;5;0m    [48;5;11m                          [48;5;0m        [48;5;234m  [48;5;0m        [48;5;15m  [48;5;11m                                    [48;5;0m    [49m                    [m
[49m                        [48;5;0m    [48;5;11m                              [48;5;228m  [48;5;15m    [48;5;0m      [48;5;15m  [48;5;11m                              [48;5;0m    [49m                        [m
[49m                            [48;5;0m      [48;5;11m                                      [48;5;15m  [48;5;11m                      [48;5;0m      [49m                            [m
[49m                                [48;5;0m        [48;5;220m  [48;5;11m                                              [48;5;220m  [48;5;0m        [49m                                [m
[49m                                        [48;5;0m            [48;5;11m                          [48;5;0m            [49m                                        [m
[49m                                                  [48;5;0m                              [49m                                                  [m
)";

std::cout << art << std::endl;
}
void printIntroduction() {
    std::string introduction = R"(EER is a CLI application for Eastern Edge Robotics)";
    std::cout << introduction << std::endl;
}

void printCLIOptions(const std::string& arg) {
    if (arg == "-h" || arg == "--help") {
        std::string options = R"(Options:
        -h, --help      show this help message and exit)";
        std::cout << options << std::endl;
    }
}

void printCLICommands() {
    std::string commands = R"(Commands:
        pilot           Pilot the robot using the selected controller
        controller      Select the desired controller
        make_profile    Make a control profile
        help            Display possible commands and usage
        version         Display the current version of the tool
        exit            Exit the application
        launch_gui      Launch the GUI application)";
    std::cout << commands << std::endl;
}

void handleCommand(const std::string& command) {
    if (command == "pilot") {
        std::cout << "Piloting the robot..." << std::endl;
    } else if (command == "controller") {
        std::cout << "Selecting the controller..." << std::endl;
    } else if (command == "make_profile") {
        std::cout << "Making a control profile..." << std::endl;
    } else if (command == "help") {
        printCLICommands();
    } else if (command == "version") {
        std::cout << "EER CLI version 1.0" << std::endl;
    } else if (command == "launch_gui") {
        std::thread guiThread(launchGUI);
        guiThread.detach();
    } else if (command == "launch_controller") {
        std::thread controlThread(launchController);
        controlThread.detach();
    } else {
        std::cout << "Unknown command: " << command << std::endl;
        std::cout << "Type 'help' to see available commands." << std::endl;
    }
}